{% extends 'base.html' %}
{% load static %}

{% block extra_css %}
  <link rel="stylesheet" href="{% static 'shop/css/shop.css' %}" />
{% endblock %}

{% block content %}
  <!-- Hero Image -->
  <div id="hero-image"></div>

  <!-- Content Section -->
  <div class="container mt-5 mb-5 content-section">
    <!-- Product Details -->
    {% for product in products %}
      <div class="row mt-4">
        <div class="col-md-8">
          <!-- Product Name -->
          <h1>{{ product.name }}</h1>
          <!-- Product Description -->
          {{ product.description|safe }}
          <!-- Product Price -->
          <h2>â‚¬{{ product.price }}</h2>
          <!-- Product Stock -->
          {% if product.stock > 0 %}
            <p>
              <strong>In Stock</strong>
            </p>
          {% else %}
            <p>
              <strong>Out of Stock</strong>
            </p>
          {% endif %}
          <!-- Quantity Selector & Add to Cart -->
          <div class="d-flex align-items-center mt-3 p-1">
            <form action="" method="post">
              {% csrf_token %}
              <label for="quantity">Quantity:</label>
              <input type="number" id="quantity" name="quantity" value="1" min="1" />
              <button type="submit" class="button-small">Add to Cart</button>
            </form>
          </div>
        </div>

        <!-- Sneak Peek Gallery -->
        <div class="col-md-4">
          <h2>Gallery</h2>
          <div class="d-flex flex-wrap">
            {% for image in product.gallery_images.all %}
              <img src="{{ image.image.url }}" alt="Gallery Image" class="img-thumbnail m-1" style="width: 100px; height: 100px; cursor: pointer;" onclick="openModal({{ forloop.counter0 }})" />
            {% empty %}
              <p>No gallery images available.</p>
            {% endfor %}
          </div>
        </div>
      </div>
    {% empty %}
      <p>No products available.</p>
    {% endfor %}
  </div>

  <!-- Hero Image 2 -->
  <div id="hero-image2"></div>

  <!-- Modal Slideshow -->
  <div id="galleryModal" class="modal fade" tabindex="-1">
    <div class="modal-dialog modal-lg">
      <div class="modal-content">
        <div class="modal-header">
          <h3 class="modal-title">Gallery</h3>
          <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
        </div>
        <div class="modal-body text-center">
          <img id="modalImage" src="" class="img-fluid" />
        </div>
        <div class="modal-footer">
          <button onclick="prevImage()" class="btn btn-secondary">Previous</button>
          <button onclick="nextImage()" class="btn btn-secondary">Next</button>
          <button type="button" class="btn btn-danger" data-bs-dismiss="modal">Close</button>
        </div>
      </div>
    </div>
  </div>
{% endblock %}
